---
type MenuItem = {
  name: string;
  desc?: string;
  price: number;
  tag?: string;
};

type MenuSection = {
  title: string;
  subtitle?: string;
  items: MenuItem[];
};

const pick = <T,>(arr: T[]) => arr[Math.floor(Math.random() * arr.length)];
const clamp = (n: number, min: number, max: number) => Math.max(min, Math.min(max, n));

function randomBDT(min = 140, max = 980) {
  const steps = [10, 20, 25, 30, 40, 50];
  const step = pick(steps);
  const raw = Math.floor(Math.random() * ((max - min) / step + 1)) * step + min;
  return clamp(raw, min, max);
}

const sections: MenuSection[] = [
  {
    title: "Asian Fusion",
    subtitle: "Wok-tossed • bold sauces • comfort bowls",
    items: [
      { name: "Signature Rice Bowl", desc: "Glazed protein, aromatic rice, crisp garnish.", price: randomBDT(), tag: "Popular" },
      { name: "Chili Crunch Chicken", desc: "Sweet heat, crunchy bite, sesame finish.", price: randomBDT() },
      { name: "Herb Citrus Fish", desc: "Light, zesty, pan-seared with house drizzle.", price: randomBDT(), tag: "Chef’s Pick" },
      { name: "Street-Style Noodles", desc: "Smoky wok aroma, veggies, soy-lime kick.", price: randomBDT() },
      { name: "Comfort Soup Cup", desc: "Warm broth with seasonal add-ins.", price: randomBDT(120, 420) },
      { name: "Crisp Rolls (6 pcs)", desc: "Golden wrapper, savory center.", price: randomBDT(180, 520) },
    ],
  },
  {
    title: "Pizza & Pasta",
    subtitle: "Stone-bake vibe • creamy classics • spicy options",
    items: [
      { name: "Classic Cheese Pizza", desc: "Simple, melty, always hits.", price: randomBDT(380, 950), tag: "Best Seller" },
      { name: "Smoky BBQ Pizza", desc: "Charred edges with a bold finish.", price: randomBDT(420, 980) },
      { name: "Spicy Red Sauce Pasta", desc: "Heat-forward, tomato-rich, glossy texture.", price: randomBDT(260, 680) },
      { name: "Creamy White Sauce Pasta", desc: "Silky sauce, mushroom notes, cheese pull.", price: randomBDT(280, 720), tag: "New" },
    ],
  },
  {
    title: "Grill & Spice",
    subtitle: "Skewers • smoky plates • naan on the side",
    items: [
      { name: "Char-Grilled Chicken Plate", desc: "Smoky bite with herb butter.", price: randomBDT(260, 880) },
      { name: "Spiced Kebab Platter", desc: "Juicy skewers, house dip, onion crunch.", price: randomBDT(240, 860) },
      { name: "Creamy Curry Bowl", desc: "Rich sauce, balanced spice, comfort-heavy.", price: randomBDT(220, 820) },
      { name: "Butter Naan", desc: "Soft, warm, brushed finish.", price: randomBDT(40, 120) },
      { name: "Garlic Naan", desc: "Garlic aroma, toasted edges.", price: randomBDT(50, 140) },
    ],
  },
  {
    title: "Dessert",
    subtitle: "Sweet finish • light & chilled",
    items: [
      { name: "Ice Cream Scoop", desc: "Classic cold comfort.", price: randomBDT(80, 220) },
      { name: "Falooda Style Dessert", desc: "Layered chill with fun textures.", price: randomBDT(140, 380) },
    ],
  },
];
---

<section id="menu" class="relative mx-auto max-w-6xl px-4 py-10 sm:px-6 lg:px-8">
  <!-- Background glow -->
  <div class="pointer-events-none absolute inset-0 -z-10">
    <div class="absolute -top-24 left-1/2 h-72 w-[38rem] -translate-x-1/2 rounded-full bg-copper-400/12 blur-3xl"></div>
    <div class="absolute bottom-0 right-0 h-72 w-72 rounded-full bg-pine-600/20 blur-3xl"></div>
    <div class="absolute inset-0 bg-gradient-to-b from-pine-950 via-pine-900 to-pine-950"></div>
  </div>

  <!-- Header -->
  <header class="mx-auto mb-8 max-w-3xl text-center" data-stagger>
    <p class="kicker reveal">MENU</p>
    <h1 class="reveal reveal-scale mt-3 font-display text-3xl font-semibold tracking-[0.01em] text-paper-50 sm:text-5xl">
      Lounge Menu
    </h1>
    <p class="reveal mx-auto mt-3 max-w-2xl text-sm leading-relaxed text-paper-100/70 sm:text-base">
      A curated selection — dummy items with randomly generated BDT prices.
    </p>
  </header>

  <!-- Grid -->
  <div class="grid grid-cols-1 gap-4 md:grid-cols-2" data-stagger>
    {sections.map((section) => (
      <article class="reveal hover-lift hover-glow group rounded-3xl border border-paper-100/10 bg-pine-950/20 shadow-[0_18px_60px_rgba(0,0,0,0.40)] backdrop-blur-md">
        <!-- Card head -->
        <div class="flex items-start justify-between gap-4 rounded-t-3xl border-b border-paper-100/10 bg-gradient-to-r from-copper-400/10 via-transparent to-transparent px-5 py-4">
          <div>
            <h2 class="font-display text-base font-semibold text-paper-50 sm:text-lg">{section.title}</h2>
            {section.subtitle && (
              <p class="mt-1 text-xs text-paper-100/70">{section.subtitle}</p>
            )}
          </div>

          <span class="inline-flex items-center rounded-full border border-paper-100/10 bg-pine-950/30 px-3 py-1 text-[11px] font-semibold text-paper-100/85">
            Today’s Picks
          </span>
        </div>

        <!-- List -->
        <div class="space-y-3 px-4 py-4 sm:px-5 sm:py-5">
          {section.items.map((item, idx) => (
            <div class="hover-glow rounded-2xl border border-paper-100/10 bg-pine-950/35 p-3 transition hover:border-paper-100/20 hover:bg-pine-950/45">
              <div class="flex items-start justify-between gap-3">
                <div class="min-w-0">
                  <div class="flex flex-wrap items-center gap-2">
                    <span class="inline-flex h-6 items-center rounded-full bg-paper-100/5 px-2 text-[11px] font-bold text-paper-100/85">
                      {String(idx + 1).padStart(2, "0")}
                    </span>

                    <p class="truncate text-sm font-semibold text-paper-50">
                      {item.name}
                    </p>

                    {item.tag && (
                      <span class="inline-flex items-center rounded-full border border-copper-400/30 bg-copper-400/10 px-2 py-0.5 text-[11px] font-semibold text-copper-200">
                        {item.tag}
                      </span>
                    )}
                  </div>

                  {item.desc && (
                    <p class="mt-1 line-clamp-2 text-xs leading-relaxed text-paper-100/70">
                      {item.desc}
                    </p>
                  )}
                </div>

                <div class="shrink-0">
                  <span class="inline-flex items-center rounded-xl border border-copper-400/25 bg-copper-400/10 px-3 py-1.5 text-xs font-semibold text-copper-200">
                    ৳{item.price}
                  </span>
                </div>
              </div>
            </div>
          ))}
        </div>

        <!-- Footer glow line -->
        <div class="h-px w-full bg-gradient-to-r from-transparent via-copper-400/25 to-transparent"></div>
        <div class="px-5 py-4">
          <p class="text-xs text-paper-100/55">
            * Prices are randomly generated placeholders (BDT).
          </p>
        </div>
      </article>
    ))}
  </div>
</section>
