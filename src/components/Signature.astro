---
const deals = [
  { title: "Breakfast Set", tag: "Breakfast", price: 480, img: "/assets/food/food-04.avif" },
  { title: "Berry Dessert Cup", tag: "Dessert", price: 360, img: "/assets/food/food-32.avif" },
  { title: "Signature Platter", tag: "Lunch", price: 890, img: "/assets/food/food-11.avif" },
  { title: "Chef’s Chicken Bowl", tag: "Dinner", price: 760, img: "/assets/food/food-06.avif" },
  { title: "Spicy Curry Plate", tag: "Indian", price: 980, img: "/assets/food/food-18.avif" },
  { title: "Pasta Special", tag: "Pasta", price: 720, img: "/assets/food/food-22.avif" },
];
---

<section id="signature" class="py-14 lg:py-20">
  <div class="mx-auto max-w-6xl px-4 lg:px-6">
    <div class="reveal flex items-end justify-between gap-6">
      <div>
        <p class="kicker">TODAY’S</p>
        <h2 class="mt-2 font-display text-2xl font-semibold text-paper-50 sm:text-3xl">
          Special deals
        </h2>
        <p class="mt-2 max-w-2xl text-sm leading-relaxed text-paper-100/70 sm:text-base">
          A rotating selection of signature plates — dummy items with BDT pricing.
        </p>
      </div>

      <a
        data-magnetic="true"
        href="#menu"
        class="hidden rounded-full border border-paper-100/15 bg-pine-950/25 px-5 py-2.5 text-sm font-semibold text-paper-50/90 backdrop-blur-md transition hover:border-copper-400/35 sm:inline-flex"
      >
        Explore full menu →
      </a>
    </div>

    <!-- Tile grid (like reference) -->
    <div class="mt-8 rounded-[28px] border border-paper-100/10 bg-pine-950/20 p-3 backdrop-blur-md sm:p-5">
      <div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3" data-stagger>
        {deals.map((d, idx) => (
          <article
            class="reveal hover-lift hover-glow deal-tile group relative overflow-hidden rounded-3xl border border-paper-100/10 bg-pine-950/15 transition hover:border-copper-400/25"
            data-deal
            data-index={idx}
          >
            <img
              src={d.img}
              alt={d.title}
              loading="lazy"
              class="img-zoom h-44 w-full object-cover opacity-95 sm:h-48"
            />

            <!-- top-right small icon badge (like reference) -->
            <div class="absolute right-3 top-3">
              <div class="grid h-9 w-9 place-items-center rounded-xl border border-paper-100/15 bg-pine-950/45 text-paper-100/80 backdrop-blur-md">
                <span class="text-[11px]">★</span>
              </div>
            </div>

            <!-- overlay -->
            <div class="absolute inset-0 bg-gradient-to-t from-black/75 via-black/10 to-transparent"></div>

            <!-- bottom content -->
            <div class="absolute bottom-0 left-0 right-0 p-4">
              <div class="flex items-end justify-between gap-3">
                <div>
                  <div class="text-sm font-semibold text-paper-50">{d.title}</div>
                  <div class="mt-1 inline-flex items-center gap-2 text-xs text-paper-100/70">
                    <span class="h-1.5 w-1.5 rounded-full bg-copper-400/80"></span>
                    {d.tag}
                  </div>
                </div>

                <div class="shrink-0 rounded-full border border-copper-400/25 bg-pine-950/45 px-3 py-1 text-xs font-semibold text-copper-200 backdrop-blur-md">
                  ৳{d.price}
                </div>
              </div>
            </div>
          </article>
        ))}
      </div>
    </div>
  </div>

  <style>
    /* Modern "active" tile glow (auto highlight) */
    .deal-tile.is-active {
      border-color: rgba(211, 153, 105, 0.35) !important;
      box-shadow: 0 0 0 1px rgba(211, 153, 105, 0.16), 0 24px 60px rgba(0, 0, 0, 0.45);
      transform: translateY(-2px);
    }
  </style>

  <script>
    const tiles = Array.from(document.querySelectorAll("[data-deal]"));
    if (tiles.length) {
      let i = 0;
      let timer;

      function setActive(n) {
        tiles.forEach((t, idx) => t.classList.toggle("is-active", idx === n));
      }

      function start() {
        stop();
        setActive(i);
        timer = setInterval(() => {
          i = (i + 1) % tiles.length;
          setActive(i);
        }, 3200);
      }

      function stop() {
        if (timer) clearInterval(timer);
      }

      // Pause on hover/touch for premium feel
      tiles.forEach((t) => {
        t.addEventListener("mouseenter", stop);
        t.addEventListener("mouseleave", start);
        t.addEventListener("touchstart", stop, { passive: true });
        t.addEventListener("touchend", start);
        t.addEventListener("focusin", stop);
        t.addEventListener("focusout", start);
      });

      start();
    }
  </script>
</section>
